{"ts":1342893220040,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var redis = require('redis');\nvar nohm = require(__dirname+'/../../lib/nohm').Nohm;\nvar args = require(__dirname+'/../testArgs.js');\n\nnohm.setPrefix(args.prefix);\nnohm.setClient(args.redis);\nrequire(__dirname+'/Model.js');\n\nprocess.on('message', function (msg) {\n  var event, modelName, fn;\n  \n  switch (msg.question) {\n    case 'does nohm have pubsub?':\n      process.send({\n        question: msg.question,\n        answer: nohm.getPubSubClient()\n      });\n    break;\n    \n    case 'initialize':\n      nohm.setPubSubClient(redis.createClient(args.redis_port, args.redis_host), function (err) {\n        process.send({\n          question: msg.question,\n          answer: err || true,\n          error: err\n        });\n      });\n    break;\n    \n    case 'subscribe':\n      event = msg.args.event;\n      modelName = msg.args.modelName;\n      nohm.factory(modelName).subscribe(event, function (change) {\n        process.send({\n          question: 'subscribe',\n          answer: change,\n          event: event\n        });\n      });\n    break;\n    \n    case 'subscribeOnce':\n      event = msg.args.event;\n      modelName = msg.args.modelName;\n      nohm.factory(modelName).subscribeOnce(event, function (change) {\n        process.send({\n          question: 'subscribeOnce',\n          answer: change\n        });\n      });\n    break;\n    \n    case 'unsubscribe':\n      event = msg.args.event;\n      modelName = msg.args.modelName;\n      fn = msg.args.fn;\n      nohm.factory(modelName).unsubscribe(event, fn);\n      process.send({\n        question: 'unsubscribe',\n        answer: true\n      });\n    break;\n  }\n});"]],"start1":0,"start2":0,"length1":0,"length2":1602}]],"length":1602}
{"contributors":[],"silentsave":true,"ts":1342893238140,"patch":[[{"diffs":[[0,"refix);\n"],[1,"+args.redis.on('ready', function () {\n+  nohm.setClient(args.redis);\n+});\n"],[0,"nohm.set"]],"start1":155,"start2":155,"length1":16,"length2":90}]],"length":1676,"saved":false}
{"ts":1342893239941,"patch":[[{"diffs":[[0,"redis);\n"],[-1,"+"],[0,"});\nnohm"]],"start1":224,"start2":224,"length1":17,"length2":16}]],"length":1675,"saved":false}
{"ts":1342893240607,"patch":[[{"diffs":[[0,"on () {\n"],[-1,"+"],[0,"  nohm.s"]],"start1":193,"start2":193,"length1":17,"length2":16}]],"length":1674,"saved":false}
{"ts":1342893241290,"patch":[[{"diffs":[[0,"refix);\n"],[-1,"+"],[0,"args.red"]],"start1":155,"start2":155,"length1":17,"length2":16}]],"length":1673,"saved":false}
{"ts":1342893242744,"patch":[[{"diffs":[[0,"});\n"],[-1,"nohm.setClient(args.redis);\n"],[0,"requ"]],"start1":230,"start2":230,"length1":36,"length2":8}]],"length":1645,"saved":false}
